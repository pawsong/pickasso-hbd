"use strict";$(document).ready(function(){function e(e,n,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+e+"=([^&#]*)"),o=r.exec(location.search);if(null===o)return n;var l=decodeURIComponent(o[1].replace(/\+/g," "));if(t===!0)return l;var a=parseInt(l,10);return a>0?a:n}function n(){var e=$('<iframe class="wallpaper" src="wallpapers/'+a[i]+'.html"></iframe>');return e.css("position","absolute").css("width","100%").css("height","100%"),e}var t=e("WALLPAPER_LOAD_TIME",5),r=e("WALLPAPER_DELAY",10);console.log("WALLPAPER_LOAD_TIME : %d",t),console.log("WALLPAPER_DELAY : %d",r);var o=1e3*t,l=1e3*r,a=["webgl_video_panorama_equirectangular","webgl_helpers","webgl_interactive_particles","webgl_kinect","webgl_materials_cubemap_balls_reflection","webgl_materials_cubemap","webgl_effects_vr","webgl_geometry_hierarchy","webgl_rtt","webgl_buffergeometry_custom_attributes_particles","webgl_animation_cloth","webgl_custom_attributes_particles","webgl_postprocessing","webgl_particles_random","webgl_particles_sprites","webgl_postprocessing_glitch"],c=a.length,i=0,s=$("body"),u=n(),p=null;s.prepend(u),setInterval(function(){i++,i>=c&&(i=0),p=n(),s.prepend(p),setTimeout(function(){u.remove(),u=p,p=null},o)},l)}),$(document).ready(function(){function e(e,n,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+e+"=([^&#]*)"),o=r.exec(location.search);if(null===o)return n;var l=decodeURIComponent(o[1].replace(/\+/g," "));if(t===!0)return l;var a=parseInt(l,10);return a>0?a:n}function n(){function e(){o=[],a=-1}function n(e){console.log("[insert] new data inserted");var n=o.length+e.length-l;o=n>0?o.slice(n).concat(e):o.concat(e),a=o.length-2}function t(){return 0===o.length}function r(){var e=o.length;return 0===e?null:(a+=1,a>=o.length&&(a=0),console.log("[next] index=%d, queueLen=%d",a,e),o[a])}var o=[],a=-1;return{reset:e,insert:n,empty:t,next:r}}function t(e){return function(n){return n.tag?void(n.tag===r&&(e&&c.reset(),c.insert(n.data))):void console.error("Cannot find tag")}}var r=e("TAG","pickasso",!0),o=e("IMG_DELAY",5),l=e("MAX_QUEUE_SIZE",20);console.log("TAG : %s",r),console.log("IMG_DELAY : %d",o),console.log("MAX_QUEUE_SIZE : %d",l);var a=1e3*o,c=n(),i=io("http://1.234.4.209:3000");i.on("connect",function(){console.log("connected"),i.on("init",t(!0)),i.on("data",t(!1))});var s=$("#instaGallery"),u=null;async.forever(function(e){var n=c.next();n||(n={type:"image",url:"http://scontent-a.cdninstagram.com/hphotos-xap1/t51.2885-15/1388826_1549781818588246_826641552_n.jpg"}),async.parallel({current:function(e){return u?void u.play(e):e()},next:function(e){var t,r;if("image"===n.type)t=$('<img class="instagram-wrapper" src="'+n.url+'">'),s.prepend(t),r=function(e){setTimeout(e,a)},t.load(function(){e(null,{elem:t,play:r})});else{t=$('<video class="instagram-wrapper" src="'+n.url+'">'),s.prepend(t);var o=t[0];r=function(e){o.play(),t.bind("ended",function(){e()})},o.oncanplay=function(){e(null,{elem:t,play:r})}}}},function(n,t){return n?e(n):(u&&u.elem.remove(),u=t.next,void e())})},function(e){if(e)return void console.error(e);throw new Error("Unexpectedly terminated")})});