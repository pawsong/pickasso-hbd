"use strict";$(document).ready(function(){function e(){var e=$('<iframe class="wallpaper" src="wallpapers/'+n[o]+'.html"></iframe>');return e.css("position","absolute").css("width","100%").css("height","100%"),e}var n=["webgl_video_panorama_equirectangular","webgl_helpers","webgl_interactive_particles","webgl_materials_cubemap_dynamic2","webgl_kinect","webgl_materials_cubemap_balls_reflection","webgl_materials_cubemap","webgl_effects_vr","webgl_geometry_hierarchy","webgl_rtt","webgl_buffergeometry_custom_attributes_particles","webgl_animation_cloth","webgl_custom_attributes_particles","webgl_postprocessing","webgl_effects_parallaxbarrier","webgl_particles_random","webgl_particles_sprites","webgl_postprocessing_glitch"],t=2e3,r=6e3,a=n.length,o=0,l=$("body"),i=e(),c=null;l.prepend(i),setInterval(function(){o++,o>=a&&(o=0),c=e(),l.prepend(c),setTimeout(function(){i.remove(),i=c,c=null},t)},r)}),$(document).ready(function(){function e(){function e(){o=[],l=-1,i=-1}function n(e){console.log("[insert] new data inserted");var n=o.length+e.length-r;n>0?(i=Math.max(i-n,-1),o=o.slice(n).concat(e)):o=o.concat(e),l=i}function t(){return 0===o.length}function a(){var e=o.length;return 0===e?null:(l+=1,l>=o.length&&(l=0),l>i&&(i=l),console.log("[next] index=%d, maxIndex=%d, queueLen=%d",l,i,e),o[l])}var o=[],l=-1,i=-1;return{reset:e,insert:n,empty:t,next:a}}function n(e){return function(n){if(!n.tag)return void console.error("Cannot find tag");var t=a[n.tag];return t?(e&&t.reset(),void t.insert(n.data)):void console.error("Cannot find queue")}}var t=5e3,r=20,a={pickasso:e(),pickassotest:e()},o=io("http://1.234.4.209:3000");o.on("connect",function(){console.log("connected"),o.on("init",n(!0)),o.on("data",n(!1))});var l=a.pickassotest,i=$("#instaGallery"),c=null;async.forever(function(e){var n=l.next();n||(n={type:"image",url:"http://scontent-a.cdninstagram.com/hphotos-xap1/t51.2885-15/1388826_1549781818588246_826641552_n.jpg"}),async.parallel({current:function(e){return c?void c.play(e):e()},next:function(e){var r,a;if("image"===n.type)r=$('<img class="instagram-wrapper" src="'+n.url+'">'),i.prepend(r),a=function(e){setTimeout(e,t)},r.load(function(){e(null,{elem:r,play:a})});else{r=$('<video class="instagram-wrapper" src="'+n.url+'">'),i.prepend(r);var o=r[0];a=function(e){o.play(),r.bind("ended",function(){e()})},o.oncanplay=function(){e(null,{elem:r,play:a})}}}},function(n,t){return n?e(n):(c&&c.elem.remove(),c=t.next,void e())})},function(e){if(e)return void console.error(e);throw new Error("Unexpectedly terminated")})});