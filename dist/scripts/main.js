"use strict";$(document).ready(function(){function e(e,n,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+e+"=([^&#]*)"),l=r.exec(location.search);if(null===l)return n;var o=decodeURIComponent(l[1].replace(/\+/g," "));if(t===!0)return o;var a=parseInt(o,10);return a>0?a:n}function n(){var e=$('<iframe class="wallpaper" src="wallpapers/'+o[s]+'.html"></iframe>');return e.css("position","absolute").css("width","100%").css("height","100%"),e}var t=e("WALLPAPER_LOAD_TIME",5),r=e("WALLPAPER_DELAY",10),l=e("LOW_PERFORMANCE","FALSE",!0);console.log("WALLPAPER_LOAD_TIME : %d",t),console.log("WALLPAPER_DELAY : %d",r),console.log("LOW_PERFORMANCE : %s",l);var o,a=1e3*t,c=1e3*r;o="TRUE"===l?["webgl_video_panorama_equirectangular","webgl_helpers","webgl_interactive_particles","webgl_kinect","webgl_materials_cubemap_balls_reflection","webgl_materials_cubemap","webgl_geometry_hierarchy","webgl_rtt","webgl_buffergeometry_custom_attributes_particles","webgl_animation_cloth","webgl_particles_random","webgl_postprocessing_glitch"]:["webgl_video_panorama_equirectangular","webgl_helpers","webgl_postprocessing_dof2","webgl_interactive_particles","webgl_materials_cubemap_dynamic2","webgl_kinect","webgl_loader_json_blender","webgl_materials_cubemap_balls_reflection","webgl_materials_cubemap","webgl_geometry_hierarchy","webgl_performance","webgl_postprocessing_advanced","webgl_rtt","webgl_loader_ctm","webgl_buffergeometry_custom_attributes_particles","webgl_animation_cloth","webgl_particles_random","webgl_postprocessing_glitch"];var i=o.length,s=0,_=$("body"),u=n(),g=null;_.prepend(u),setInterval(function(){s++,s>=i&&(s=0),g=n(),_.prepend(g),setTimeout(function(){u.remove(),u=g,g=null},a)},c)}),$(document).ready(function(){function e(e,n,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+e+"=([^&#]*)"),l=r.exec(location.search);if(null===l)return n;var o=decodeURIComponent(l[1].replace(/\+/g," "));if(t===!0)return o;var a=parseInt(o,10);return a>0?a:n}function n(){function e(){l=[],o=0}function n(e){_&&console.log("[insert] new data inserted");var n=l.length+e.length-c;l=n>0?l.slice(n).concat(e):l.concat(e),o=l.length}function t(){return 0===l.length}function r(){var e=l.length;return 0===e?null:(o-=1,0>o&&(o=e-1),_&&console.log("[next] index=%d, queueLen=%d",o,e),l[o])}var l=[],o=0;return{reset:e,insert:n,empty:t,next:r}}function t(e){var n=e.tag;if(!n)return void console.error("Cannot find tag");if(e.init){if(n!==l)return;_&&console.log("Initialize ..."),u.reset()}(n===l||-1!==i.indexOf(n))&&u.insert(e.data)}var r=e("DEBUG","FALSE",!0),l=e("TAG","pickasso",!0),o=e("SUB_TAGS","4983project,cakeshopseoul",!0),a=e("IMG_DELAY",5),c=e("MAX_QUEUE_SIZE",20);console.log("DEBUG : %s",r),console.log("TAG : %s",l),console.log("SUB_TAGS : %s",o),console.log("IMG_DELAY : %d",a),console.log("MAX_QUEUE_SIZE : %d",c);var i=o.split(","),s=1e3*a,_="TRUE"===r,u=n(),g=io("http://1.234.4.209:3000");g.on("connect",function(){_&&console.log("connected"),g.on("init",t),g.on("data",t)});var p=$("#instaGallery"),d=null;async.forever(function(e){var n=u.next();n||(n={type:"image",url:"http://scontent-a.cdninstagram.com/hphotos-xap1/t51.2885-15/1388826_1549781818588246_826641552_n.jpg"}),async.parallel({current:function(e){return d?void d.play(e):e()},next:function(e){var t,r;if("image"===n.type)t=$('<img class="instagram-wrapper" src="'+n.url+'">'),p.prepend(t),r=function(e){setTimeout(e,s)},t.load(function(){e(null,{elem:t,play:r})});else{t=$('<video class="instagram-wrapper" src="'+n.url+'">'),p.prepend(t);var l=t[0];r=function(e){l.play(),t.bind("ended",function(){e()})},l.oncanplay=function(){e(null,{elem:t,play:r})}}}},function(n,t){return n?e(n):(d&&d.elem.remove(),d=t.next,void e())})},function(e){if(e)return void console.error(e);throw new Error("Unexpectedly terminated")})});