"use strict";$(document).ready(function(){function e(){var e=$('<iframe class="wallpaper" src="wallpapers/'+n[a]+'.html"></iframe>');return e.css("position","absolute").css("width","100%").css("height","100%"),e}var n=["webgl_video_panorama_equirectangular","webgl_helpers","webgl_interactive_particles","webgl_kinect","webgl_materials_cubemap_balls_reflection","webgl_materials_cubemap","webgl_effects_vr","webgl_geometry_hierarchy","webgl_rtt","webgl_buffergeometry_custom_attributes_particles","webgl_animation_cloth","webgl_custom_attributes_particles","webgl_postprocessing","webgl_particles_random","webgl_particles_sprites","webgl_postprocessing_glitch"],t=5e3,r=1e4,o=n.length,a=0,i=$("body"),l=e(),c=null;i.prepend(l),setInterval(function(){a++,a>=o&&(a=0),c=e(),i.prepend(c),setTimeout(function(){l.remove(),l=c,c=null},t)},r)}),$(document).ready(function(){function e(){function e(){a=[],i=-1,l=-1}function n(e){console.log("[insert] new data inserted");var n=a.length+e.length-r;n>0?(l=Math.max(l-n,-1),a=a.slice(n).concat(e)):a=a.concat(e),i=l}function t(){return 0===a.length}function o(){var e=a.length;return 0===e?null:(i+=1,i>=a.length&&(i=0),i>l&&(l=i),console.log("[next] index=%d, maxIndex=%d, queueLen=%d",i,l,e),a[i])}var a=[],i=-1,l=-1;return{reset:e,insert:n,empty:t,next:o}}function n(e){return function(n){if(!n.tag)return void console.error("Cannot find tag");var t=o[n.tag];return t?(e&&t.reset(),void t.insert(n.data)):void console.error("Cannot find queue")}}var t=5e3,r=20,o={pickasso:e(),pickassotest:e()},a=io("http://1.234.4.209:3000");a.on("connect",function(){console.log("connected"),a.on("init",n(!0)),a.on("data",n(!1))});var i=o.pickassotest,l=$("#instaGallery"),c=null;async.forever(function(e){var n=i.next();n||(n={type:"image",url:"http://scontent-a.cdninstagram.com/hphotos-xap1/t51.2885-15/1388826_1549781818588246_826641552_n.jpg"}),async.parallel({current:function(e){return c?void c.play(e):e()},next:function(e){var r,o;if("image"===n.type)r=$('<img class="instagram-wrapper" src="'+n.url+'">'),l.prepend(r),o=function(e){setTimeout(e,t)},r.load(function(){e(null,{elem:r,play:o})});else{r=$('<video class="instagram-wrapper" src="'+n.url+'">'),l.prepend(r);var a=r[0];o=function(e){a.play(),r.bind("ended",function(){e()})},a.oncanplay=function(){e(null,{elem:r,play:o})}}}},function(n,t){return n?e(n):(c&&c.elem.remove(),c=t.next,void e())})},function(e){if(e)return void console.error(e);throw new Error("Unexpectedly terminated")})});