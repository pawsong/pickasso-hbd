"use strict";$(document).ready(function(){function e(e,n,r){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),l=t.exec(location.search);if(null===l)return n;var o=decodeURIComponent(l[1].replace(/\+/g," "));if(r===!0)return o;var a=parseInt(o,10);return a>0?a:n}function n(){var e=$('<iframe class="wallpaper" src="wallpapers/'+o[s]+'.html"></iframe>');return e.css("position","absolute").css("width","100%").css("height","100%"),e}var r=e("WALLPAPER_LOAD_TIME",5),t=e("WALLPAPER_DELAY",60),l=e("LOW_PERFORMANCE","FALSE",!0);console.log("WALLPAPER_LOAD_TIME : %d",r),console.log("WALLPAPER_DELAY : %d",t),console.log("LOW_PERFORMANCE : %s",l);var o,a=1e3*r,c=1e3*t;o="TRUE"===l?["webgl_video_panorama_equirectangular","webgl_helpers","webgl_interactive_particles","webgl_kinect","webgl_materials_cubemap_balls_reflection","webgl_materials_cubemap","webgl_geometry_hierarchy","webgl_rtt","webgl_buffergeometry_custom_attributes_particles","webgl_animation_cloth","webgl_particles_random","webgl_postprocessing_glitch"]:["webgl_video_panorama_equirectangular","webgl_helpers","webgl_postprocessing_dof2","webgl_interactive_particles","webgl_materials_cubemap_dynamic2","webgl_kinect","webgl_loader_json_blender","webgl_materials_cubemap_balls_reflection","webgl_materials_cubemap","webgl_geometry_hierarchy","webgl_performance","webgl_postprocessing_advanced","webgl_rtt","webgl_loader_ctm","webgl_buffergeometry_custom_attributes_particles","webgl_animation_cloth","webgl_particles_random","webgl_postprocessing_glitch"];var i=o.length,s=0,_=$("body"),g=n(),u=null;_.prepend(g),setInterval(function(){s++,s>=i&&(s=0),u=n(),_.prepend(u),setTimeout(function(){g.remove(),g=u,u=null},a)},c)}),$(document).ready(function(){function e(e,n,r){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),l=t.exec(location.search);if(null===l)return n;var o=decodeURIComponent(l[1].replace(/\+/g," "));if(r===!0)return o;var a=parseInt(o,10);return a>0?a:n}function n(){function e(){l=[],o=0}function n(e){u&&console.log("[insert] new data inserted");var n=l.length+e.length-c;l=n>0?l.slice(n).concat(e):l.concat(e),o=l.length}function r(){return 0===l.length}function t(){var e=l.length;return 0===e?null:(o-=1,0>o&&(o=e-1),u&&console.log("[next] index=%d, queueLen=%d",o,e),l[o])}var l=[],o=0;return{reset:e,insert:n,empty:r,next:t}}function r(e){var n=e.tag;if(!n)return void console.error("Cannot find tag");if(e.init){if(n!==l)return;u&&console.log("Initialize ..."),p.reset()}(n===l||-1!==_.indexOf(n))&&p.insert(e.data)}var t=e("DEBUG","FALSE",!0),l=e("TAG","pickasso",!0),o=e("SUB_TAGS","4983project,cakeshopseoul",!0),a=e("IMG_DELAY",15),c=e("MAX_QUEUE_SIZE",20),i=e("NOTI_PERIOD",10),s=e("NO_INSTAGRAM","FALSE",!0);if(console.log("DEBUG : %s",t),console.log("TAG : %s",l),console.log("SUB_TAGS : %s",o),console.log("IMG_DELAY : %d",a),console.log("MAX_QUEUE_SIZE : %d",c),console.log("NOTI_PERIOD : %d",i),console.log("NO_INSTAGRAM : %s",s),"TRUE"!==s){var _=o.split(","),g=1e3*a,u="TRUE"===t,p=n(),d=io("http://1.234.4.209:3000");d.on("connect",function(){u&&console.log("connected"),d.on("init",r),d.on("data",r)});var m=$("#instaGallery"),f=null,b=0;async.forever(function(e){var n;i>b?(n=p.next(),b++):(n={type:"image",url:"/images/noti.jpg"},b=0),n||(n={type:"image",url:"/images/logo.jpg"}),async.parallel({current:function(e){return f?void f.play(e):e()},next:function(e){var r,t;if("image"===n.type)r=$('<img class="instagram-wrapper" src="'+n.url+'">'),m.prepend(r),t=function(e){setTimeout(e,g)},r.load(function(){e(null,{elem:r,play:t})});else{r=$('<video class="instagram-wrapper" src="'+n.url+'">'),m.prepend(r);var l=r[0];t=function(e){l.play(),r.bind("ended",function(){e()})},l.oncanplay=function(){e(null,{elem:r,play:t})}}}},function(n,r){return n?e(n):(f&&f.elem.remove(),f=r.next,void e())})},function(e){if(e)return void console.error(e);throw new Error("Unexpectedly terminated")})}});