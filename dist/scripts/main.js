"use strict";$(document).ready(function(){function n(){var n=$('<iframe class="wallpaper" src="wallpapers/wallpaper'+o+'.html"></iframe>');return n.css("position","absolute").css("width","100%").css("height","100%"),n}var e=2e4,t=6e4,r=2,o=3,a=$("body"),i=n(),c=null;a.prepend(i),setInterval(function(){o=o>=r?1:+o+1,c=n(),a.prepend(c),setTimeout(function(){i.remove(),i=c,c=null},e)},t)}),$(document).ready(function(){function n(){function n(){a=[],i=-1,c=-1}function e(n){console.log("[insert] new data inserted");var e=a.length+n.length-r;e>0?(c=Math.max(c-e,-1),a=a.slice(e).concat(n)):a=a.concat(n),i=c}function t(){return 0===a.length}function o(){var n=a.length;return 0===n?null:(i+=1,i>=a.length&&(i=0),i>c&&(c=i),console.log("[next] index=%d, maxIndex=%d, queueLen=%d",i,c,n),a[i])}var a=[],i=-1,c=-1;return{reset:n,insert:e,empty:t,next:o}}function e(n){return function(e){if(!e.tag)return void console.error("Cannot find tag");var t=o[e.tag];return t?(n&&t.reset(),void t.insert(e.data)):void console.error("Cannot find queue")}}var t=5e3,r=20,o={pickasso:n(),pickassotest:n()},a=io("http://1.234.4.209:3000");a.on("connect",function(){console.log("connected"),a.on("init",e(!0)),a.on("data",e(!1))});var i=o.pickassotest,c=$("#instaGallery"),l=null;async.forever(function(n){var e=i.next();e||(e={type:"image",url:"http://scontent-a.cdninstagram.com/hphotos-xap1/t51.2885-15/1388826_1549781818588246_826641552_n.jpg"}),async.parallel({current:function(n){return l?void l.play(n):n()},next:function(n){var r,o;if("image"===e.type)r=$('<img class="instagram-wrapper" src="'+e.url+'">'),c.prepend(r),o=function(n){setTimeout(n,t)},r.load(function(){n(null,{elem:r,play:o})});else{r=$('<video class="instagram-wrapper" src="'+e.url+'">'),c.prepend(r);var a=r[0];o=function(n){a.play(),r.bind("ended",function(){n()})},a.oncanplay=function(){n(null,{elem:r,play:o})}}}},function(e,t){return e?n(e):(l&&l.elem.remove(),l=t.next,void n())})},function(n){if(n)return void console.error(n);throw new Error("Unexpectedly terminated")})});