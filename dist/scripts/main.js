"use strict";$(document).ready(function(){function e(e,n,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var o=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=o.exec(location.search);if(null===r)return n;var l=decodeURIComponent(r[1].replace(/\+/g," "));if(t===!0)return l;var a=parseInt(l,10);return a>0?a:n}function n(){var e=$('<iframe class="wallpaper" src="wallpapers/'+l[s]+'.html"></iframe>');return e.css("position","absolute").css("width","100%").css("height","100%"),e}var t=e("WALLPAPER_LOAD_TIME",5),o=e("WALLPAPER_DELAY",60),r=e("LOW_PERFORMANCE","FALSE",!0);console.log("WALLPAPER_LOAD_TIME : %d",t),console.log("WALLPAPER_DELAY : %d",o),console.log("LOW_PERFORMANCE : %s",r);var l,a=1e3*t,c=1e3*o;l="TRUE"===r?["webgl_video_panorama_equirectangular","webgl_helpers","webgl_interactive_particles","webgl_kinect","webgl_materials_cubemap_balls_reflection","webgl_materials_cubemap","webgl_geometry_hierarchy","webgl_rtt","webgl_buffergeometry_custom_attributes_particles","webgl_animation_cloth","webgl_particles_random","webgl_postprocessing_glitch"]:["webgl_video_panorama_equirectangular","webgl_helpers","webgl_postprocessing_dof2","webgl_interactive_particles","webgl_materials_cubemap_dynamic2","webgl_kinect","webgl_loader_json_blender","webgl_materials_cubemap_balls_reflection","webgl_materials_cubemap","webgl_geometry_hierarchy","webgl_performance","webgl_postprocessing_advanced","webgl_rtt","webgl_loader_ctm","webgl_buffergeometry_custom_attributes_particles","webgl_animation_cloth","webgl_particles_random","webgl_postprocessing_glitch"];var i=l.length,s=0,u=$("body"),_=n(),g=null;u.prepend(_),setInterval(function(){s++,s>=i&&(s=0),g=n(),u.prepend(g),setTimeout(function(){_.remove(),_=g,g=null},a)},c)}),$(document).ready(function(){function e(e,n,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var o=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=o.exec(location.search);if(null===r)return n;var l=decodeURIComponent(r[1].replace(/\+/g," "));if(t===!0)return l;var a=parseInt(l,10);return a>0?a:n}function n(){function e(){r=[],l=0}function n(e){p&&console.log("[insert] new data inserted");var n=r.length+e.length-c;r=n>0?r.slice(n).concat(e):r.concat(e),l=r.length}function t(){return 0===r.length}function o(){var e=r.length;return 0===e?null:(l-=1,0>l&&(l=e-1),p&&console.log("[next] index=%d, queueLen=%d",l,e),r[l])}var r=[],l=0;return{reset:e,insert:n,empty:t,next:o}}function t(e){var n=e.tag;if(!n)return void console.error("Cannot find tag");if(e.init){if(n!==r)return;p&&console.log("Initialize ..."),d.reset()}(n===r||-1!==_.indexOf(n))&&d.insert(e.data)}var o=e("DEBUG","FALSE",!0),r=e("TAG","pickasso",!0),l=e("SUB_TAGS","4983project,cakeshopseoul",!0),a=e("IMG_DELAY",15),c=e("MAX_QUEUE_SIZE",20),i=e("NOTI_PERIOD",10),s=e("INSTA_TIMEOUT",20),u=e("NO_INSTAGRAM","FALSE",!0);if(console.log("DEBUG : %s",o),console.log("TAG : %s",r),console.log("SUB_TAGS : %s",l),console.log("IMG_DELAY : %d",a),console.log("MAX_QUEUE_SIZE : %d",c),console.log("NOTI_PERIOD : %d",i),console.log("INSTA_TIMEOUT : %d",s),console.log("NO_INSTAGRAM : %s",u),"TRUE"!==u){var _=l.split(","),g=1e3*a,p="TRUE"===o,f=1e3*s,d=n(),m=io("http://1.234.4.209:3000");m.on("connect",function(){p&&console.log("connected"),m.on("init",t),m.on("data",t)});var b=$("#instaGallery"),w=null,v=0;async.forever(function(e){var n;i>v?(n=d.next(),v++):(n={type:"image",url:"/images/noti2.jpg"},v=0),n||(n={type:"image",url:"/images/logo.jpg"});var t=-1,o=-2;async.parallel({current:function(e){return w?void async.parallel([function(e){w.play(function(){e(t)})},function(e){setTimeout(function(){e(o)},f)}],function(n){n===o&&p&&console.error("current timeout"),e()}):e()},next:function(e){var r,l;async.parallel([function(e){if("image"===n.type)r=$('<img class="instagram-wrapper" src="'+n.url+'">'),b.prepend(r),l=function(e){setTimeout(e,g)},r.load(function(){e(t)});else{r=$('<video class="instagram-wrapper" src="'+n.url+'">'),b.prepend(r);var o=r[0];l=function(e){o.play(),r.bind("ended",function(){e()})},o.oncanplay=function(){e(t)}}},function(e){setTimeout(function(){e(o)},f)}],function(n){n===o&&(p&&console.error("next timeout"),l=function(e){e()}),e(null,{elem:r,play:l})})}},function(n,t){return n?e(n):(w&&w.elem.remove(),w=t.next,void e())})},function(e){if(e)return void console.error(e);throw new Error("Unexpectedly terminated")})}});