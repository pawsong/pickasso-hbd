"use strict";$(document).ready(function(){function e(e,n,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+e+"=([^&#]*)"),l=r.exec(location.search);if(null===l)return n;var a=decodeURIComponent(l[1].replace(/\+/g," "));if(t===!0)return a;var o=parseInt(a,10);return o>0?o:n}function n(){var e=$('<iframe class="wallpaper" src="wallpapers/'+a[s]+'.html"></iframe>');return e.css("position","absolute").css("width","100%").css("height","100%"),e}var t=e("WALLPAPER_LOAD_TIME",5),r=e("WALLPAPER_DELAY",10),l=e("LOW_PERFORMANCE","FALSE",!0);console.log("WALLPAPER_LOAD_TIME : %d",t),console.log("WALLPAPER_DELAY : %d",r),console.log("LOW_PERFORMANCE : %d",l);var a,o=1e3*t,c=1e3*r;a="TRUE"===l?["webgl_video_panorama_equirectangular","webgl_helpers","webgl_interactive_particles","webgl_kinect","webgl_materials_cubemap_balls_reflection","webgl_materials_cubemap","webgl_effects_vr","webgl_geometry_hierarchy","webgl_rtt","webgl_buffergeometry_custom_attributes_particles","webgl_animation_cloth","webgl_custom_attributes_particles","webgl_postprocessing","webgl_particles_random","webgl_particles_sprites","webgl_postprocessing_glitch"]:["webgl_video_panorama_equirectangular","webgl_helpers","webgl_postprocessing_dof2","webgl_interactive_particles","webgl_materials_cubemap_dynamic2","webgl_kinect","webgl_loader_json_blender","webgl_materials_cubemap_balls_reflection","webgl_materials_cubemap","webgl_effects_vr","webgl_geometry_hierarchy","webgl_performance","webgl_postprocessing_advanced","webgl_rtt","webgl_loader_ctm","webgl_buffergeometry_custom_attributes_particles","webgl_animation_cloth","webgl_custom_attributes_particles","webgl_postprocessing","webgl_particles_random","webgl_particles_sprites","webgl_postprocessing_glitch"];var i=a.length,s=0,_=$("body"),g=n(),p=null;_.prepend(g),setInterval(function(){s++,s>=i&&(s=0),p=n(),_.prepend(p),setTimeout(function(){g.remove(),g=p,p=null},o)},c)}),$(document).ready(function(){function e(e,n,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+e+"=([^&#]*)"),l=r.exec(location.search);if(null===l)return n;var a=decodeURIComponent(l[1].replace(/\+/g," "));if(t===!0)return a;var o=parseInt(a,10);return o>0?o:n}function n(){function e(){l=[],o=-1}function n(e){console.log("[insert] new data inserted");var n=l.length+e.length-a;l=n>0?l.slice(n).concat(e):l.concat(e),o=l.length-2}function t(){return 0===l.length}function r(){var e=l.length;return 0===e?null:(o+=1,o>=l.length&&(o=0),console.log("[next] index=%d, queueLen=%d",o,e),l[o])}var l=[],o=-1;return{reset:e,insert:n,empty:t,next:r}}function t(e){return function(n){return n.tag?void(n.tag===r&&(e&&c.reset(),c.insert(n.data))):void console.error("Cannot find tag")}}var r=e("TAG","pickasso",!0),l=e("IMG_DELAY",5),a=e("MAX_QUEUE_SIZE",20);console.log("TAG : %s",r),console.log("IMG_DELAY : %d",l),console.log("MAX_QUEUE_SIZE : %d",a);var o=1e3*l,c=n(),i=io("http://1.234.4.209:3000");i.on("connect",function(){console.log("connected"),i.on("init",t(!0)),i.on("data",t(!1))});var s=$("#instaGallery"),_=null;async.forever(function(e){var n=c.next();n||(n={type:"image",url:"http://scontent-a.cdninstagram.com/hphotos-xap1/t51.2885-15/1388826_1549781818588246_826641552_n.jpg"}),async.parallel({current:function(e){return _?void _.play(e):e()},next:function(e){var t,r;if("image"===n.type)t=$('<img class="instagram-wrapper" src="'+n.url+'">'),s.prepend(t),r=function(e){setTimeout(e,o)},t.load(function(){e(null,{elem:t,play:r})});else{t=$('<video class="instagram-wrapper" src="'+n.url+'">'),s.prepend(t);var l=t[0];r=function(e){l.play(),t.bind("ended",function(){e()})},l.oncanplay=function(){e(null,{elem:t,play:r})}}}},function(n,t){return n?e(n):(_&&_.elem.remove(),_=t.next,void e())})},function(e){if(e)return void console.error(e);throw new Error("Unexpectedly terminated")})});